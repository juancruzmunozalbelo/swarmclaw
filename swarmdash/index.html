<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SwarmClaw Control Room</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;600;700&family=Inter:wght@400;500;600&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="/style.css" />
</head>

<body>
  <div class="shell">
    <header class="topbar card">
      <div class="brand">
        <div class="brand__title">SwarmClaw Control Room</div>
        <div class="brand__sub">Autonomous agent swarm control plane</div>
      </div>
      <div class="meta">
        <div class="pill pill--muted" id="pill-mode">MODE: ...</div>
        <div class="pill" id="pill-stage">ETAPA: ...</div>
        <div class="pill pill--agent" id="pill-agent">AGENT: ...</div>
        <div class="pill pill--wa" id="pill-wa">WA: ...</div>
        <div class="pill pill--muted" id="pill-updated">ULTIMO_UPDATE: ...</div>
        <div class="pill pill--muted" id="pill-now">API: ...</div>
      </div>
    </header>
    <nav class="quicknav card" aria-label="Secciones">
      <a class="quicknav__item" href="#runtime">Runtime</a>
      <a class="quicknav__item" href="#kanban-panel">Kanban</a>
      <a class="quicknav__item" href="#events-panel">Eventos</a>
    </nav>

    <main class="layout">
      <section class="hero card" id="runtime">
        <div class="hero__world">
          <canvas id="game" width="360" height="640"></canvas>
          <div class="hint">
            Vista viva del swarm. El estado se sincroniza desde <span class="hint__kbd">metrics/status</span>.
          </div>
        </div>
        <div class="hero__state">
          <div class="card__title">Estado Runtime</div>
          <div class="kv">
            <div class="kv__k">ITEM</div>
            <div class="kv__v" id="kv-item">...</div>
            <div class="kv__k">SIGUIENTE</div>
            <div class="kv__v" id="kv-next">...</div>
            <div class="kv__k">ARCHIVOS</div>
            <div class="kv__v mono" id="kv-files">...</div>
            <div class="kv__k">CONTAINERS</div>
            <div class="kv__v mono" id="kv-containers">...</div>
          </div>
          <div class="runtimePanel">
            <div class="runtimePanel__head">
              <div class="card__title">Runtime Metrics</div>
              <div class="runtimePanel__headRight">
                <button class="btn btn--soft runtimePanel__btn" id="runtime-sync-lanes-btn" type="button">Sync
                  lanes</button>
                <button class="btn btn--soft runtimePanel__btn" id="runtime-watchdog-btn" type="button">Run
                  watchdog</button>
                <button class="btn btn--soft runtimePanel__btn" id="runtime-reset-btn" type="button">Reset
                  counters</button>
                <div class="pill pill--muted runtimePanel__pill" id="runtime-alert-level">ALERT: ...</div>
              </div>
            </div>
            <div class="runtimePanel__updated mono" id="runtime-updated">updatedAt: ...</div>
            <div class="runtimePanel__grid" id="runtime-counters"></div>
            <div class="runtimeRoles" id="runtime-roles"></div>
            <div class="lanePanel" id="active-lanes"></div>
            <div class="blockedQueue" id="blocked-queue"></div>
            <div class="runtimePanel__alerts mono" id="runtime-alert-items">...</div>
            <div class="runtimeHistory" id="runtime-history"></div>
            <div class="runbook">
              <div class="runbook__head">
                <div class="card__title">Runbook Incidentes</div>
                <button class="btn btn--soft runtimePanel__btn" id="runbook-copy-btn" type="button">Copiar
                  reporte</button>
              </div>
              <div class="runbook__summary mono" id="runbook-summary"></div>
            </div>
            <div class="runtimePanel__msg" id="runtime-msg"></div>
          </div>
        </div>
      </section>

      <section class="kanban card" id="kanban-panel">
        <div class="kanban__head">
          <div class="card__title">Backlog Kanban</div>
          <div class="todo__toolbar">
            <button class="btn btn--soft" id="todo-clear-done" type="button">Limpiar done</button>
            <button class="btn btn--danger" id="todo-clear-all" type="button">Vaciar todo</button>
          </div>
        </div>
        <form class="createTodo" id="todo-create-form">
          <input class="createTodo__input createTodo__id" id="todo-new-id" type="text"
            placeholder="ID opcional (ej: AUTH-120)" />
          <input class="createTodo__input" id="todo-new-owner" type="text" placeholder="Owner (ej: Dev)" />
          <input class="createTodo__input createTodo__scope" id="todo-new-scope" type="text" placeholder="Scope / tarea"
            required />
          <select class="createTodo__input createTodo__state" id="todo-new-state">
            <option value="todo">todo</option>
            <option value="planning">planning</option>
            <option value="doing">doing</option>
            <option value="blocked">blocked</option>
            <option value="done">done</option>
          </select>
          <button class="btn btn--soft" id="todo-create-btn" type="submit">Agregar</button>
        </form>
        <div class="createTodo__msg" id="todo-create-msg"></div>
        <div class="kanbanMetrics">
          <div class="kanbanMetrics__top">
            <div class="kanbanMetrics__kpi" id="kanban-kpi-overall">TOTAL: ...</div>
            <div class="kanbanMetrics__kpi" id="kanban-kpi-progress">DONE: ...</div>
            <div class="kanbanMetrics__kpi" id="kanban-kpi-wip">WIP: ...</div>
            <div class="kanbanMetrics__kpi" id="kanban-kpi-blocked">BLOCKED: ...</div>
          </div>
          <div class="kanbanMetrics__bar">
            <div class="kanbanMetrics__barFill" id="kanban-progress-fill"></div>
          </div>
          <div class="kanbanMetrics__portfolio" id="kanban-portfolio"></div>
        </div>
        <div class="kanban__board" id="kanban"></div>
      </section>

      <section class="eventsWrap card" id="events-panel">
        <div class="card__title">Eventos (host)</div>
        <div class="events" id="events"></div>
      </section>
    </main>
  </div>
  <!-- Alert Modal -->
  <div class="modal-overlay" id="alert-modal">
    <div class="modal">
      <div class="modal__header">
        <span class="modal__icon" id="modal-icon">⚡</span>
        <span class="modal__title" id="modal-title">Alert</span>
        <button class="modal__close" id="modal-close" type="button">&times;</button>
      </div>
      <div class="modal__body" id="modal-body"></div>
      <div class="modal__footer">
        <button class="btn btn--gold modal__dismiss" id="modal-dismiss" type="button">Entendido</button>
      </div>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div class="modal-overlay" id="confirm-modal">
    <div class="modal">
      <div class="modal__header">
        <span class="modal__icon" id="confirm-icon">⚠️</span>
        <span class="modal__title" id="confirm-title">Confirmar acción</span>
        <button class="modal__close" id="confirm-close" type="button">&times;</button>
      </div>
      <div class="modal__body" id="confirm-body"></div>
      <div class="modal__footer modal__footer--split">
        <button class="btn btn--ghost" id="confirm-cancel" type="button">Cancelar</button>
        <button class="btn btn--gold" id="confirm-ok" type="button">Confirmar</button>
      </div>
    </div>
  </div>

  <script src="/app.js"></script>
</body>

</html>